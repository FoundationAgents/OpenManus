<!DOCTYPE html>
<html>
<head>
    <title>VChart Demo</title>
    <script src="https://unpkg.com/@visactor/vchart/build/index.min.js"></script>
</head>
<body>
    <div id="chart-container" style="width: 100%; height: 100%;"></div>
    <script>
      // parse spec with function
      function parseSpec(stringSpec) {
        return JSON.parse(stringSpec, (k, v) => {
          if (typeof v === 'string' && v.startsWith('__FUNCTION__')) {
            const funcBody = v.slice(12); // 移除标记
            try {
              return new Function('return (' + funcBody + ')')();
            } catch(e) {
              console.error('函数解析失败:', e);
              return () => {};
            }
          }
          return v;
        });
      }
      const spec = parseSpec(`{"type":"common","series":[{"type":"bar","id":"mainSeries","data":{"id":"data_bar","values":[{"20001":"营业收入(亿元)","年份":2019,"营业收入(亿元)":854.3,"净利润(亿元)":412.1,"毛利率(%)":91.4,"资产负债率(%)":22.1,"营收增长率(%)":16,"净利润增长率(%)":17.1,"市盈率(PE)":35.2},{"20001":"营业收入(亿元)","年份":2020,"营业收入(亿元)":949.2,"净利润(亿元)":466.9,"毛利率(%)":91.7,"资产负债率(%)":21.8,"营收增长率(%)":11.1,"净利润增长率(%)":13.3,"市盈率(PE)":42.8},{"20001":"营业收入(亿元)","年份":2021,"营业收入(亿元)":1094.6,"净利润(亿元)":524.6,"毛利率(%)":91.9,"资产负债率(%)":20.5,"营收增长率(%)":15.3,"净利润增长率(%)":12.4,"市盈率(PE)":38.5},{"20001":"营业收入(亿元)","年份":2022,"营业收入(亿元)":1275.5,"净利润(亿元)":627.2,"毛利率(%)":92.1,"资产负债率(%)":19.3,"营收增长率(%)":16.5,"净利润增长率(%)":19.6,"市盈率(PE)":32.1},{"20001":"营业收入(亿元)","年份":2023,"营业收入(亿元)":1476.9,"净利润(亿元)":747.3,"毛利率(%)":92.3,"资产负债率(%)":18.7,"营收增长率(%)":15.8,"净利润增长率(%)":19.2,"市盈率(PE)":28.7}]},"dataIndex":0,"label":{"visible":true},"xField":"年份","yField":"营业收入(亿元)","seriesField":20001,"bar":{"style":{}}},{"type":"line","id":"subSeries","dataIndex":0,"data":{"id":"data_line","values":[{"20001":"净利润(亿元)","年份":2019,"营业收入(亿元)":854.3,"净利润(亿元)":412.1,"毛利率(%)":91.4,"资产负债率(%)":22.1,"营收增长率(%)":16,"净利润增长率(%)":17.1,"市盈率(PE)":35.2},{"20001":"净利润(亿元)","年份":2020,"营业收入(亿元)":949.2,"净利润(亿元)":466.9,"毛利率(%)":91.7,"资产负债率(%)":21.8,"营收增长率(%)":11.1,"净利润增长率(%)":13.3,"市盈率(PE)":42.8},{"20001":"净利润(亿元)","年份":2021,"营业收入(亿元)":1094.6,"净利润(亿元)":524.6,"毛利率(%)":91.9,"资产负债率(%)":20.5,"营收增长率(%)":15.3,"净利润增长率(%)":12.4,"市盈率(PE)":38.5},{"20001":"净利润(亿元)","年份":2022,"营业收入(亿元)":1275.5,"净利润(亿元)":627.2,"毛利率(%)":92.1,"资产负债率(%)":19.3,"营收增长率(%)":16.5,"净利润增长率(%)":19.6,"市盈率(PE)":32.1},{"20001":"净利润(亿元)","年份":2023,"营业收入(亿元)":1476.9,"净利润(亿元)":747.3,"毛利率(%)":92.3,"资产负债率(%)":18.7,"营收增长率(%)":15.8,"净利润增长率(%)":19.2,"市盈率(PE)":28.7}]},"label":{"visible":true},"xField":"年份","yField":"净利润(亿元)","seriesField":20001,"line":{"style":{}},"point":{"style":{}}}],"labelLayout":"region","axes":[{"id":"dimensionAxis","type":"band","orient":"bottom"},{"id":"measureAxisLeft","seriesId":"mainSeries","type":"linear","orient":"left","label":{"style":{}}},{"id":"measureAxisRight","seriesId":"subSeries","type":"linear","orient":"right","tick":{"visible":false},"grid":{"visible":false},"label":{"style":{}}}],"legends":[{"orient":"right","type":"discrete","item":{"visible":true,"background":{"style":{}},"label":{"style":{}},"shape":{"style":{}}}}],"title":{"text":"茅台综合财务指标概览"}}`);
      const chart = new VChart.VChart(spec, {
          dom: 'chart-container'
      });
      chart.renderSync();
    </script>
</body>
</html>
