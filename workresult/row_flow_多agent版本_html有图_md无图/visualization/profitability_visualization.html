<!DOCTYPE html>
<html>
<head>
    <title>VChart Demo</title>
    <script src="https://unpkg.com/@visactor/vchart/build/index.min.js"></script>
</head>
<body>
    <div id="chart-container" style="width: 100%; height: 100%;"></div>
    <script>
      // parse spec with function
      function parseSpec(stringSpec) {
        return JSON.parse(stringSpec, (k, v) => {
          if (typeof v === 'string' && v.startsWith('__FUNCTION__')) {
            const funcBody = v.slice(12); // 移除标记
            try {
              return new Function('return (' + funcBody + ')')();
            } catch(e) {
              console.error('函数解析失败:', e);
              return () => {};
            }
          }
          return v;
        });
      }
      const spec = parseSpec(`{"type":"line","data":{"id":"data","values":[{"10001":"营业收入(亿元)","10002":854.3,"20001":"营业收入(亿元)","年份":2019},{"10001":"净利润(亿元)","10002":412.1,"20001":"净利润(亿元)","年份":2019},{"10001":"毛利率(%)","10002":91.4,"20001":"毛利率(%)","年份":2019},{"10001":"净利率(%)","10002":48.2,"20001":"净利率(%)","年份":2019},{"10001":"ROE(%)","10002":33.1,"20001":"ROE(%)","年份":2019},{"10001":"营业收入(亿元)","10002":949.2,"20001":"营业收入(亿元)","年份":2020},{"10001":"净利润(亿元)","10002":466.9,"20001":"净利润(亿元)","年份":2020},{"10001":"毛利率(%)","10002":91.7,"20001":"毛利率(%)","年份":2020},{"10001":"净利率(%)","10002":49.2,"20001":"净利率(%)","年份":2020},{"10001":"ROE(%)","10002":31.4,"20001":"ROE(%)","年份":2020},{"10001":"营业收入(亿元)","10002":1094.6,"20001":"营业收入(亿元)","年份":2021},{"10001":"净利润(亿元)","10002":524.6,"20001":"净利润(亿元)","年份":2021},{"10001":"毛利率(%)","10002":91.9,"20001":"毛利率(%)","年份":2021},{"10001":"净利率(%)","10002":47.9,"20001":"净利率(%)","年份":2021},{"10001":"ROE(%)","10002":30.9,"20001":"ROE(%)","年份":2021},{"10001":"营业收入(亿元)","10002":1275.5,"20001":"营业收入(亿元)","年份":2022},{"10001":"净利润(亿元)","10002":627.2,"20001":"净利润(亿元)","年份":2022},{"10001":"毛利率(%)","10002":92.1,"20001":"毛利率(%)","年份":2022},{"10001":"净利率(%)","10002":49.2,"20001":"净利率(%)","年份":2022},{"10001":"ROE(%)","10002":31.9,"20001":"ROE(%)","年份":2022},{"10001":"营业收入(亿元)","10002":1476.9,"20001":"营业收入(亿元)","年份":2023},{"10001":"净利润(亿元)","10002":747.3,"20001":"净利润(亿元)","年份":2023},{"10001":"毛利率(%)","10002":92.3,"20001":"毛利率(%)","年份":2023},{"10001":"净利率(%)","10002":50.6,"20001":"净利率(%)","年份":2023},{"10001":"ROE(%)","10002":33.2,"20001":"ROE(%)","年份":2023}]},"xField":"年份","yField":"10002","seriesField":"20001","axes":[{"orient":"bottom","type":"band","label":{"style":{}},"title":{"visible":false,"style":{}}},{"orient":"left","type":"linear","label":{"style":{}},"title":{"visible":false,"style":{}}}],"legends":[{"orient":"right","type":"discrete","item":{"visible":true,"background":{"style":{}},"label":{"style":{}},"shape":{"style":{}}}}],"title":{"text":"茅台盈利能力趋势分析"}}`);
      const chart = new VChart.VChart(spec, {
          dom: 'chart-container'
      });
      chart.renderSync();
    </script>
</body>
</html>
