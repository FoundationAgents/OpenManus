<!DOCTYPE html>
<html>
<head>
    <title>VChart Demo</title>
    <script src="https://unpkg.com/@visactor/vchart/build/index.min.js"></script>
</head>
<body>
    <div id="chart-container" style="width: 100%; height: 100%;"></div>
    <script>
      // parse spec with function
      function parseSpec(stringSpec) {
        return JSON.parse(stringSpec, (k, v) => {
          if (typeof v === 'string' && v.startsWith('__FUNCTION__')) {
            const funcBody = v.slice(12); // 移除标记
            try {
              return new Function('return (' + funcBody + ')')();
            } catch(e) {
              console.error('函数解析失败:', e);
              return () => {};
            }
          }
          return v;
        });
      }
      const spec = parseSpec(`{"type":"rangeColumn","data":{"id":"data","values":[{"Dimension":"估值水平","Score":28.1,"Max_Score":100},{"Dimension":"增长匹配度","Score":71.5,"Max_Score":100},{"Dimension":"股息回报","Score":80,"Max_Score":100},{"Dimension":"历史合理性","Score":73.8,"Max_Score":100}]},"yField":"Dimension","xField":["Score","Max_Score"],"direction":"horizontal","label":{"visible":true},"title":{"text":"茅台估值综合评估"}}`);
      const chart = new VChart.VChart(spec, {
          dom: 'chart-container'
      });
      chart.renderSync();
    </script>
</body>
</html>
